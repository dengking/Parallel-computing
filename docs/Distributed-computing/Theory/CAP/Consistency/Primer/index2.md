# Primer

## csdn [分布式一致性协议](https://blog.csdn.net/demon7552003/article/details/86657767)

一致性（Consistency）是指多副本（Replications）问题中的数据一致性。关于分布式系统的一致性模型有以下几种：

### 强一致性

当更新操作完成之后，任何多个**后续**进程或者线程的访问都会**返回最新的更新过的值**，直到这个数据被其他数据更新为止。
但是这种实现对性能影响较大，因为这意味着，只要上次的操作没有处理完，就不能让用户读取数据。

### 弱一致性

系统并不保证进程或者线程的访问都会返回最新更新过的值。系统在数据写入成功之后，**不承诺立即可以读到最新写入的值**，也不会具体的承诺多久之后可以读到。甚至不能保证可以访问到。

### 最终一致性

**最终一致性也是弱一致性的一种**，它无法保证数据更新后，所有后续的访问都能看到最新数值，而是需要一个时间，在这个时间之后可以保证这一点（**就是在一段时间后，节点间的数据会最终达到一致状态**），而在这个时间内，数据也许是不一致的，这个系统无法保证强一致性的时间片段被称为「不一致窗口」。不一致窗口的时间长短取决于很多因素，比如备份数据的个数、网络传输延迟速度、系统负载等。
最终一致性在实际应用中又有多种变种：

| 类型           | 说明                                                         |
| :------------- | :----------------------------------------------------------- |
| 因果一致性     | 如果 A 进程在更新之后向 B 进程通知更新的完成，那么 B 的访问操作将会返回更新的值。而没有因果关系的 C 进程将会遵循最终一致性的规则（C 在不一致窗口内还是看到是旧值）。 |
| 读你所写一致性 | 因果一致性的特定形式。一个进程进行数据更新后，会给自己发送一条通知，该进程后续的操作都会以最新值作为基础，而其他的进程还是只能在不一致窗口之后才能看到最新值。 |
| 会话一致性     | 读你所写一致性的特定形式。进程在访问存储系统同一个会话内，系统保证该进程可以读取到最新之，但如果会话终止，重新连接后，如果此时还在不一致窗口内，还是可嫩读取到旧值。 |
| 单调读一致性   | 如果一个进程已经读取到一个特定值，那么该进程不会读取到该值以前的任何值。 |
| 单调写一致性   | 系统保证对同一个进程的写操作串行化。                         |

![一致性模型](https://img-blog.csdnimg.cn/20190126155346494.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RlbW9uNzU1MjAwMw==,size_16,color_FFFFFF,t_70)

> 一致性模型